<style>
	.auto-filled {
		background-color: #f0fdf4 !important;
		border-color: #10b981 !important;
		transition: all 0.3s ease;
	}

	input[name="address-zip-code"]:focus {
		outline: none;
		box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
	}
</style>
<form class="flex flex-col w-full gap-10 mt-9 mb-15 px-32" id="address-form">
     <div class="flex flex-col gap-5"></div>
            <h1 class="font-semibold text-[20px]"><%= title %></h1>

            <div class="flex flex-col gap-10" id="addresses">
                    <div class="flex flex-col gap-2.5 justify-start" id="address">
                         <input type="text" value="<%= address?.id %>" id="addressId" hidden>

                          <div class="flex flex-row gap-3">
                                <label class="flex flex-col text-[12px] gap-3 w-full">
                                        Frase Curta *
                                        <input placeholder="Ex: Minha Casa" class="border rounded-[5px] border-gray h-10 p-2.5" type="text"
                                              name="address-short-phrase" value="<%= address?.shortPhrase || '' %>" required maxlength="50">
                                </label>
                                <label class="flex flex-col text-[12px] gap-3 w-full">
                                        CEP *
                                        <input placeholder="XXXXX-XXX" class="border rounded-[5px] border-gray h-10 p-2.5" type="text"
                                              name="address-zip-code" value="<%= address?.formattedZipCode || '' %>" required maxlength="9">
                                </label>
                                <label class="flex flex-col text-[12px] gap-3 w-full">
                                        Estado *
                                        <select name="address-state" class="border rounded-[5px] border-gray h-10 p-2.5" required>
                                              <option value="">Selecione...</option>
                                              <% (states || []).forEach(state => { %>
                                                    <option value="<%= state %>" <%= address?.state === state ? 'selected' : '' %>><%= state %></option>
                                              <% }) %>
                                        </select>
                                </label>
                          </div>

                          <div class="flex flex-row gap-3">
                                <label class="flex flex-col text-[12px] gap-3 w-full">
                                        Cidade *
                                        <input placeholder="Ex: Guararema, Biritiba" class="border rounded-[5px] border-gray h-10 p-2.5"
                                              type="text" name="address-city" value="<%= address?.city || '' %>" required maxlength="50">
                                </label>
                                <label class="flex flex-col text-[12px] gap-3 w-full">
                                        Tipo Logradouro *
                                        <select name="address-street-type" class="border rounded-[5px] border-gray h-10 p-2.5" required>
                                             <option value="">Selecione...</option>
                                             <option value="Rodovia" <%= address?.streetType === 'Rodovia' ? 'selected' : '' %>>Rodovia</option>
                                             <option value="Rua" <%= address?.streetType === 'Rua' ? 'selected' : '' %>>Rua</option>
                                             <option value="Avenida" <%= address?.streetType === 'Avenida' ? 'selected' : '' %>>Avenida</option>
                                             <option value="Beco" <%= address?.streetType === 'Beco' ? 'selected' : '' %>>Beco</option>
                                        </select>
                                </label>
                                <label class="flex flex-col text-[12px] gap-3 w-full">
                                        Logradouro *
                                        <input placeholder="Ex: Rua Almirante Barbosa" class="border rounded-[5px] border-gray h-10 p-2.5"
                                              type="text" name="address-street-name" value="<%= address?.streetName || '' %>" required maxlength="100">
                                </label>
                          </div>

                          <div class="flex flex-row gap-3">
                                <label class="flex flex-col text-[12px] gap-3 w-full">
                                        Número *
                                        <input placeholder="Ex: 123" class="border rounded-[5px] border-gray h-10 p-2.5" type="text" name="address-number"
                                              value="<%= address?.number || '' %>" maxlength="4" required>
                                </label>
                                <label class="flex flex-col text-[12px] gap-3 w-full">
                                        Bairro *
                                        <input placeholder="Ex: Centro" class="border rounded-[5px] border-gray h-10 p-2.5" type="text"
                                              name="address-neighborhood" value="<%= address?.neighborhood || '' %>" required maxlength="50">
                                </label>
                                <label class="flex flex-col text-[12px] gap-3 w-full">
                                        Complemento *
                                        <select name="address-residence-type" class="border rounded-[5px] border-gray h-10 p-2.5" required>
                                             <option value="">Selecione...</option>
                                             <option value="Casa" <%= address?.residenceType === 'Casa' ? 'selected' : '' %>>Casa</option>
                                             <option value="Apartamento" <%= address?.residenceType === 'Apartamento' ? 'selected' : '' %>>Apartamento</option>
                                        </select>
                                </label>
                          </div>

                          <div class="flex flex-row gap-3">
                                <label class="flex flex-col text-[12px] gap-3 w-full">
                                        Tipo de Endereço *
                                        <select name="address-type" class="border rounded-[5px] border-gray h-10 p-2.5" required>
                                             <option value="">Selecione...</option>
                                             <option value="DELIVERY" <%= address?.type === 'DELIVERY' ? 'selected' : '' %>>Entrega</option>
                                             <option value="BILLING" <%= address?.type === 'BILLING' ? 'selected' : '' %>>Cobrança</option>
                                             <option value="DELIVERY_AND_BILLING" <%= address?.type === 'DELIVERY_AND_BILLING' ? 'selected' : '' %>>Entrega e Cobrança </option>
                                        </select>
                                </label>
                                <label class="flex flex-col text-[12px] gap-3 w-full">
                                   Observações
                                   <input placeholder="Ex: Casa com portão laranja" class="border rounded-[5px] border-gray h-10 p-2.5" type="text"
                                         name="address-observation" value="<%= address?.observation || '' %>" maxlength="100">
                                </label>
                          </div>
                    </div>
            </div>

            <div class="flex flex-row justify-between items-center mt-2">
                    <% if (!isAdmin) { %>
                          <a href="/addresses/client/f4a4ecf2-e31e-41b2-8c9f-a36898e23d81" class="font-semibold text-sm bg-brown text-white rounded hover:bg-dark-brown w-[150px] h-10 flex items-center justify-center">
                          Voltar
                          </a>
                    <% } %>
                    <div class="flex flex-1 justify-end">
                          <button type="submit" id="<%= address ? 'updateAddress' : 'newAddress' %>" class="font-medium text-sm text-white bg-light-green w-[150px] h-10 rounded-[5px] cursor-pointer hover:bg-dark-green flex items-center justify-center">
                                 <%= address ? 'Atualizar' : 'Salvar' %>
                          </button>
                    </div>
            </div>
      </div>
</form>
<script type="module" src="/scripts/address/index.mjs"></script>
